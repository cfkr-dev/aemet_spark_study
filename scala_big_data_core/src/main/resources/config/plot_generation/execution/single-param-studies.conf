include "../url/global.conf"
include "../storage/single-param-studies.conf"
include "../utils.conf"
include "../../global/schema/spark.conf"

study-params-values = [
  {
    study-param-name = "temperature",
    study-param-abbrev = "temp",
    study-param-unit = "ÂºC",
    col-agg-method = ${group-methods.avg}
  },
  {
    study-param-name = "precipitation",
    study-param-abbrev = "prec",
    study-param-unit = "mm",
    col-agg-method = ${group-methods.avg}
  },
  {
    study-param-name = "wind velocity",
    study-param-abbrev = "wind_vel",
    study-param-unit = "m/s",
    col-agg-method = ${group-methods.avg}
  },
  {
    study-param-name = "pressure",
    study-param-abbrev = "press",
    study-param-unit = "hPa",
    col-agg-method = ${group-methods.avg}
  },
  {
    study-param-name = "sun radiation",
    study-param-abbrev = "sun_rad",
    study-param-unit = "h",
    col-agg-method = ${group-methods.avg}
  },
  {
    study-param-name = "relative humidity",
    study-param-abbrev = "rel_hum",
    study-param-unit = "%",
    col-agg-method = ${group-methods.avg}
  },
]

top-10-values = {
  order = [
    "highest",
    "lowest"
  ],
  temporal = [
    {
      value = "2024",
      title = "Year 2024"
    },
    {
      value = "decade",
      title = "in the last decade"
    },
    {
      value = "global",
      title = "from the start of registries"
    },
  ]
}

top-10 = {
  uri = ${bar-chart},
  body = {
    src = {
      path = ${top-10.data-src},
      axis = {
        x = {
          name = ${column-names.top}
        },
        y = {
          name = ${column-names.col-daily-grouped}
        }
      }
    },
    dest = {
      path = ${top-10.data-dest},
      filename = "top_10",
      export-png = true
    },
    style = {
      lettering = {
        // Params:
        // 1 - Order (highest/lowest)
        // 2 - Meteo param
        title = "Top 10 stations with %s %s",

        // Params:
        // 1 - temporal title (year 2024/last decade/from the start of registries)
        subtitle = "%s",
        x-label = "Top",

        // Params:
        // 1 - Meteo param
        // 2 - Units
        y-label = "%s (%s)",
        inside-info = [
          {
            label = "Station",
            build = [
              {
                text-before = "",
                name = ${stations-df.station-id},
                text-after = " "
              },
              {
                text-before = "",
                name = ${stations-df.station-name},
                text-after = " "
              },
              {
                text-before = "(",
                name = ${stations-df.state},
                text-after = ")."
              }
            ]
          },
          {
            label = "Location",
            build = [
              {
                text-before = "",
                name = ${stations-df.lat-dms},
                text-after = " "
              },
              {
                text-before = "",
                name = ${stations-df.long-dms},
                text-after = " "
              },
              {
                text-before = "(",
                name = ${stations-df.altitude},
                text-after = " m)."
              }
            ]
          }
        ]
      },
      figure = {
        inverted-horizontal-axis = false,
        threshold-limit-max-min = 0.5,
        threshold-perc-limit-outside-text = 0.3,
        range-margin-perc = 0.05,
        color = "#4169e1"
      },
      margin = {
        left = 120,
        right = 120,
        top = 100,
        bottom = 100
      }
    }
  }
}

top-5-inc-values = {
  order = [
    "highest",
    "lowest"
  ]
}

top-5-inc = {
  uri = ${bar-chart},
  body = {
    src = {
      path = ${top-5.data-src},
      axis = {
        x = {
          name = ${column-names.top}
        },
        y = {
          name = ${column-names.inc}
        }
      }
    },
    dest = {
      path = ${top-5.data-dest},
      filename = "top_5",
      export-png = true
    },
    style = {
      lettering = {
        // Params:
        // 1 - Order (highest/lowest)
        // 2 - Meteo param
        title = "Top 5 stations with %s %s increment",
        subtitle = "From the start of registries",
        x-label = "Top",

        // Params:
        // 1 - Meteo param
        // 2 - Units
        y-label = "%s increment (%s)",
        inside-info = [
          {
            label = "Station",
            build = [
              {
                text-before = "",
                name = ${stations-df.station-id},
                text-after = " "
              },
              {
                text-before = "",
                name = ${stations-df.station-name},
                text-after = " "
              },
              {
                text-before = "(",
                name = ${stations-df.state},
                text-after = ")."
              }
            ]
          },
          {
            label = "Location",
            build = [
              {
                text-before = "",
                name = ${stations-df.lat-dms},
                text-after = " "
              },
              {
                text-before = "",
                name = ${stations-df.long-dms},
                text-after = " "
              },
              {
                text-before = "(",
                name = ${stations-df.altitude},
                text-after = " m)."
              }
            ]
          }
        ]
      },
      figure = {
        inverted-horizontal-axis = false,
        threshold-limit-max-min = 0.5,
        threshold-perc-limit-outside-text = 0.3,
        range-margin-perc = 0.05,
        color = "#4169e1"
      },
      margin = {
        left = 120,
        right = 120,
        top = 100,
        bottom = 100
      }
    }
  }
}